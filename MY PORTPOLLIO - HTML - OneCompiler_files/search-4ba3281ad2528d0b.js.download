(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{81858:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(66732)}])},90550:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(74848),r=n(52064),s=n(66247),a=n(82058),l=n(96540),c=n(67310),o=n(37318),d=n(47863),u=n(94850),x=n(58782),p=n(8172);let h=e=>{let{user:t,type:n,path:h}=e,g=(0,l.useRef)(null),[m,j]=(0,l.useState)(null),[A,y]=(0,l.useState)(1),[f,_]=(0,l.useState)(null),[v,b]=(0,l.useState)(!0),[S,C]=(0,l.useState)(null),[w,B]=(0,l.useState)(e.sortBy||"recent"),T=(0,o.d4)(e=>e.user.token);async function k(){g.current=Date.now();let i=g.current,r={type:n,page:A,text:f,sortBy:w};t&&t._id&&(r["user._id"]=t._id),e.org&&e.org._id&&(r["org._id"]=e.org._id),e.team&&e.team._id&&(r["team._id"]=e.team._id);let{statusCode:s,json:a}=await (0,d.RA)("/api/posts/search",T,r);200===s?g.current==i&&(b(a.length>0),j((m||[]).concat(a)),C(null)):C("Operation timedout, please try again!")}async function E(e,t){if("deleted"===t)j(m.filter(t=>t._id!==e));else{let n=[...m];n.filter(t=>t._id===e)[0].visibility=t,j(n)}}(0,l.useEffect)(()=>{C(null),k()},[A,f,w]);let N=e=>{e!==w&&(j(null),y(1),B(e))};function O(e){return(0,i.jsx)(r.A,{component:"div",sx:e=>({marginLeft:e.spacing(6),marginTop:e.spacing(6)}),children:(0,i.jsx)(s.A,{variant:"body2",children:e.msg})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(a.Ay,{item:!0,xs:12,md:5,children:(0,i.jsx)(u.A,{onChange:e=>{j(null),y(1),_(e||null)}})}),(0,i.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,i.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[(0,i.jsx)(a.Ay,{item:!0,onClick:()=>N("recent"),children:(0,i.jsx)(s.A,{variant:"body2",gutterBottom:!0,color:"textSecondary",sx:e=>"recent"===w?{cursor:"pointer",borderBottom:"2px solid ".concat(e.palette.secondary.main)}:{cursor:"pointer"},children:"Recent"})}),(0,i.jsx)(a.Ay,{item:!0,onClick:()=>N("top"),children:(0,i.jsx)(s.A,{variant:"body2",gutterBottom:!0,color:"textSecondary",sx:e=>"top"===w?{cursor:"pointer",borderBottom:"2px solid ".concat(e.palette.secondary.main)}:{cursor:"pointer"},children:"Top"})})]})})]}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),f||n?null!==m||S?m&&m.length>0&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{id:"scrollableDiv",children:(0,i.jsx)(c.A,{dataLength:m.length,next:()=>y(A+1),hasMore:v,loader:(0,i.jsx)(O,{msg:"Loading more data... "}),endMessage:(0,i.jsx)(O,{msg:"You have reached the end."}),children:m.length>0&&m.map((e,t)=>(0,i.jsx)(p.A,{postObj:e,path:"code"!=n?h:"".concat(e.properties.language),handlePostVisibilityUpdate:E},e._id))})})}):(0,i.jsx)(x.A,{}):(0,i.jsx)(s.A,{sx:e=>({paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),color:"primary",variant:"body1",children:"Start typing to searchâ€¦"}),m&&0==m.length&&!S&&(0,i.jsx)(s.A,{sx:e=>({paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),variant:"body1",children:"Nothing found!"}),S&&(0,i.jsx)(s.A,{sx:e=>({paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}),variant:"body1",children:S})]})}},94850:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(74848),r=n(91703),s=n(45931),a=n(2424),l=n(39641),c=n(77861),o=n(96540);let d=e=>{let[t,n]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let n=setTimeout(()=>{null!==t&&e.onChange(t)},500);return()=>clearTimeout(n)},[t]),(0,i.jsxs)(r.A,{variant:"outlined",sx:e=>({padding:"0px 2px",display:"flex",alignItems:"center",marginBottom:e.spacing(1)}),children:[(0,i.jsx)(s.Ay,{onChange:e=>{n(e.target.value)},value:t||"",sx:e=>({marginLeft:e.spacing(3),flex:1}),placeholder:e.placeholder||"Search...",fullWidth:!0}),t?(0,i.jsx)(a.A,{"aria-label":"search",onClick:e=>n(""),size:"large",children:(0,i.jsx)(l.A,{})}):(0,i.jsx)(a.A,{"aria-label":"search",size:"large",children:(0,i.jsx)(c.A,{})})]})}},66732:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var i=n(74848),r=n(55759),s=n(82058),a=n(13368),l=n.n(a);n(96540);var c=n(77515),o=n(80923),d=n(90550);function u(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"Search - OneCompiler"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(o.A,{}),(0,i.jsx)(r.A,{component:"main",children:(0,i.jsxs)(s.Ay,{container:!0,spacing:0,children:[(0,i.jsx)(s.Ay,{item:!0,xs:12,md:1}),(0,i.jsx)(s.Ay,{item:!0,xs:12,md:7,children:(0,i.jsx)("div",{className:"mlr10",children:(0,i.jsx)(d.A,{})})})]})}),(0,i.jsx)(c.A,{})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2611,531,863,7840,3910,930,7862,8773,2101,3091,5322,1884,9637,3554,2431,8556,2203,1494,923,1434,636,6593,8792],()=>t(81858)),_N_E=e.O()}]);